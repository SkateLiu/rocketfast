<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.2.0 (458672)"/><meta name="author" content="Teemo"/><meta name="created" content="2019-10-15 11:46:18 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-10-19 12:17:20 +0000"/><title>H方案解决方案</title></head><body><div><span style="font-size: 14px;">背景：</span></div><div><span style="font-size: 14px;">    
</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Helvetica; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">Wxx</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">是</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Helvetica; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">H</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">厂公司级移动办公平台，融合了邮件，</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Helvetica; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">IM</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">，通讯录，视频会议，直播，审批等办公场景，全球</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Helvetica; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">200</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">多个国家的员工每天都在使用。</span></div><div><font style="font-size: 14px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Helvetica; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"
/><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">研发团队共有</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Helvetica; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">100</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">多位工程师，由</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Helvetica; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">H</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">厂员工和外包人员组成。超过</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Helvetica; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">40</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">个独立业务团队，</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Helvetica; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">10</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">多个</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: Helvetica; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">BU</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">参与贡献代码</span><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">。</span></font></div><div><span style="font-size: 12px;"><br/></span></div><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;; -webkit-font-kerning: none; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">目前困难：</span></div><ol><li><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;; -webkit-font-kerning: none; font-stretch: normal; font-variant-caps: normal; line-height: normal;">项目业务多，需要跨团队协作，代码容易冲突。</span></div></li><li><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;;">测试效率低，目前用手动打包，手动测试。</span></div></li><li><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;;">发布效率低，手动打包手动上传，全部rd需要等待包上传才能下班。</span></div></li><li><div><span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;;">运维效率低，用户反馈问题无法定位，rd团队之间互相推诿。</span></div></li></ol><div><br/></div><div><font style="font-size: 18px;">方案分析</font></div><ol><li><div>H产品功能界限明确，有邮件、IM、通讯录、视频会议、直播、审批等各种场景。有100多个rd和40个团队同时贡献代码。可以采用组件式方案。App平台化。</div></li><li><div>目前QA都手动测试，因为有明确业务可以梳理每个业务的核心回归点保障App在大部分场景是正常的。可以采用<span style="font-size: 15px; letter-spacing: 0.45px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(34, 37, 39); font-family: Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Noto Sans&quot;, Roboto, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">KIF自动化测试框架</span></div></li><li><div><span style="--inversion-type-color:  simple; color: rgb(4, 4, 5); font-family: Helvetica;">目前是手动打包效率低容易出错，可以采用FastLane，自动打包上传方案。业务和部门之间梳理负责人，负责业务的稳定构建。</span></div></li><li><div><span style="--inversion-type-color:  simple; color: rgb(4, 4, 5); font-family: Helvetica;">运维效率低和用户反馈没法定位，可以采用底层用户监控框架，分析用户行为和设备各种状态。</span></div></li></ol><div>            </div><div><font style="font-size: 18px;">组件试方案</font></div><ol><li><div>CocoaPods管理整个工程，梳理业务模块</div></li></ol><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"/><col style="width: 130px;"/><col style="width: 130px;"/><col style="width: 130px;"/></colgroup><tbody><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>业务线</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>负责人</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>涉及到的库</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>工作量排期</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>IM</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>A-rd</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>IMBusiness、IMSDK、IMFoundation</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>XX</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>通讯录</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>B-rd</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>ContactListSDK</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>XX</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>视频会议</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>C-rd</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>VideoMeetingSDK、AVChatSDK、AVChatFoudation</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>XX</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>邮件</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>E-rd</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>EmailSDK</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>XX</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>审批</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>F-rd</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>ApproveSDK</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>XX</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>直播</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>G-rd</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>LivingBusiness、AVChatSDK、AVChatFoudation</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>XX</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>平台化</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>H-rd</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>WXFoundation、WXUIKit、</div><div>WXRocket</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>XX</div></td></tr></tbody></table><ul><li><div>IMSDK、IMFoundation作为底层IM模块设计，IMBusiness用IMSDK实现业务逻辑，IMSDK、IMFoudation不能编写业务代码。</div></li><li><div>AVChatSDK、AVChatFoudation作为底层视频模块设计，VideoMeetingSDK和LivingBusiness用这个两个SDK实验业务代码，，AVChatSDK、AVChatFoudation不能编写业务代码。</div></li><li><div>WXFoundation是原工程梳理出的代码工具库、WXUIKit是梳理出来的通用UI组件库、WXRocket为底层监控SDK。</div></li></ul><div>    2.根据排期各业务方把跟各自业务代码都先沉库到Development Pods，多仓库管理避免代码冲突。</div><div>    3.各个业务方业务的调用尽量使用Route的解耦方式跳转业务。</div><div>    4.各个业务方如果有依赖点可以先梳理出来，如果是公用模块可以给平台化rd处理。</div></div><div><br/></div><div><font style="font-size: 18px;">App平台化</font></div><ol><li><div>和产品负责人梳理每个版本要合入那些需求。</div></li><li><div>每个版本有固定的合码时间比如下午6点前。</div></li><li><div>每个版本都有轮值RD对这个版本所有问题负责跟进，分发问题，跟进问题修复情况。</div></li><li><div>把控每次版本合入的代码质量，codereiew、代码静态检查、包大小等。</div></li></ol><div><br/></div><div><font style="font-size: 18px;">自动化测试</font></div><ol><li><div>QA和业务方负责人梳理每个业务的回归路径。</div></li><li><div><span style="font-size: 14px;">采用</span><span style="letter-spacing: 0.45px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 14px; background-color: rgb(255, 255, 255); color: rgb(34, 37, 39); font-family: Helvetica, Arial, &quot;PingFang SC&quot;, &quot;Noto Sans&quot;, Roboto, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">KIF自动化测试框架，每次打包发布之前都跑一遍。</span></span></div></li></ol><div><br/></div><div><font style="font-size: 18px;">自动化打包平台</font></div><ol><li><div>QA采用<span style="--inversion-type-color:  simple; color: rgb(4, 4, 5); font-family: Helvetica;">Jenkins</span><span style="--inversion-type-color:  simple; color: rgb(4, 4, 5); font-family: Helvetica;">打包并且自动上传到TestFlight or Appstore.</span></div></li><li><div><span style="--inversion-type-color:  simple; color: rgb(4, 4, 5); font-family: Helvetica;">QA和产品确定产品的发布周期，确定每周固定那天打包。</span></div></li><li><div><span style="--inversion-type-color:  simple; color: rgb(4, 4, 5); font-family: Helvetica;">QA打包过程中出现问题及时反馈值班RD，值班RD跟进打包问题直到出包上传成功。</span></div></li></ol><div><br/></div><div><font style="font-size: 18px;">用户反馈</font></div><ol><li><div>每台设备都生成DeviceID和UserID，方便跟进个案。</div></li><li><div>重构用户反馈页面，问题分类和常见问题方便用户分类问题反馈处理更精准。</div></li><li><div>常见问题问题默认有返回文案解决方案，添加有无用按钮给用户反馈是否有用。</div></li><li><div>如果有必要可以接入客户机器人和在线客服（比如网易七鱼）</div></li><li><div>运维实时观察用户反馈数，如果有同一问题反馈剧增要及时同步到值班RD去跟进问题。</div></li><li><div>业务负责人梳理每个模块的关键指标，监控数据是否异常。如果有异常要及时跟进处理。</div></li><li><div>遇到很难定位的问题，可以让运维连续用户，请求用户协同解决，同时可以赠送配合用户些周边或者购物卡等。</div></li><li><div>用户反馈时上传日志等追查信息。</div></li></ol><div><br/></div><div><span style="--inversion-type-color:  simple; color: rgb(4, 4, 5); font-family: Helvetica;"><font style="font-size: 18px;">监控平台</font></span></div><ol><li><div><span style="color: rgb(4, 4, 5); font-family: Helvetica; --inversion-type-color: simple;">电量监控</span></div></li><li><div><span style="--inversion-type-color:  simple; color: rgb(4, 4, 5); font-family: Helvetica;">Crash日志监控</span></div></li><li><div><span style="--inversion-type-color:  simple; color: rgb(4, 4, 5); font-family: Helvetica;">Log日志收集</span></div></li><li><div>埋点数据收集</div></li><li><div>电量监控</div></li><li><div>磁盘监控</div></li><li><div>FPS监控</div></li><li><div><span><span>设备信息</span></span></div></li><li><div>网络监控</div></li></ol><div><br/></div><div><font style="font-size: 18px;">整体架构图</font></div><div><img src="H%E6%96%B9%E6%A1%88%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.resources/235A0130-1005-4154-88CA-F750466BDA13.png" height="1556" width="1268"/><br/></div><div><br/></div><div><font style="font-size: 18px;">扩展思考</font></div><div><font style="font-size: 18px;"><br/></font></div><div>    深入沟通了解研发流程中是否会遇到其他问题，一个需求的合入会经过、PM产出需求文档、需求评审、UI和UE设计、开发评审、开发研发、需求方验收、UI和UE验收、QA验收、需求合码、线上跟踪、数据分析等。</div><div>    比如目前rd经常在UI和UE验收过程中花费很多时间，经常会导致需求delay。我们可以分析这个过程的问题，是否这个环节可以优化。比如UI和UE出方案时就跟RD同步，RD可以在一些疑问点上抛出来，UI和RD评估设计和工作量，最后取得一个平衡点。如果尽量做到信息同步的话在UI和UE验收上可以更顺畅，从而优化整个研发速度。</div></body></html>